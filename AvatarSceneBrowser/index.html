<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <meta name="description" content="Avatar Scene Browser - Unity化身场景管理插件文档">
  <meta name="keywords" content="Unity, Avatar, 3D, Plugin, Documentation">
  <title>Avatar Scene Browser - 插件文档</title>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css">
  <link rel="stylesheet" href="./custom.css">
</head>
<body>
  <div id="app"></div>
  <script>
    window.$docsify = {
      name: 'Avatar Scene Browser',
      repo: 'https://github.com/cynth-mt/cynth-mt.github.io',
      loadSidebar: true,
      loadNavbar: true,
      subMaxLevel: 3,
      auto2top: true,
      alias: {
        '/.*/_sidebar.md': '/_sidebar.md',
        '/.*/_navbar.md': '/_navbar.md'
      },
      sidebarDisplayLevel: 1, // 设置默认展开层级
      search: {
        maxAge: 86400000,
        paths: 'auto',
        placeholder: '搜索...',
        noData: '未找到结果',
        depth: 6
      },
      // 页内目录配置
      toc: {
        scope: '.markdown-section',
        headings: 'h2, h3, h4',
        title: '目录'
      },
      // 更新时间显示
      formatUpdated: '{YYYY}/{MM}/{DD}',
      plugins: [
        function(hook, vm) {
          hook.beforeEach(function(content) {
            return content 
              + '\n\n----\n\n'
              + '<div class="footer-info">'
              + '最后更新: {docsify-updated} '
              + '</div>';
          });
          
          hook.afterEach(function(html, next) {
            var footer = [
              '<hr/>',
              '<footer>',
              '<span>Released under the MIT License.</span>',
              '<span>Copyright © 2023-present Cynth-mt</span>',
              '</footer>'
            ].join('');
            
            next(html + footer);
          });
          
          // 侧边栏展开/折叠插件
          hook.doneEach(function() {
            const sidebarDisplayLevel = $docsify.sidebarDisplayLevel || 1;
            // 获取侧边栏所有标题
            const sidebar = document.querySelector('.sidebar-nav');
            if (sidebar) {
              const allLis = sidebar.querySelectorAll('li');
              for (let i = 0; i < allLis.length; i++) {
                const li = allLis[i];
                const ul = li.querySelector('ul');
                if (ul) {
                  // 添加展开/折叠按钮
                  const firstSpan = li.querySelector('span') || li.querySelector('a');
                  if (firstSpan) {
                    firstSpan.style.cursor = 'pointer';
                    firstSpan.classList.add('folder-parent');
                    
                    // 默认展开指定层级
                    const level = parseInt(firstSpan.getAttribute('data-level') || '1');
                    if (level <= sidebarDisplayLevel) {
                      ul.style.display = 'block';
                      firstSpan.classList.add('open');
                    } else {
                      ul.style.display = 'none';
                      firstSpan.classList.remove('open');
                    }
                    
                    // 添加点击事件
                    firstSpan.onclick = function(e) {
                      if (ul.style.display === 'none') {
                        ul.style.display = 'block';
                        firstSpan.classList.add('open');
                      } else {
                        ul.style.display = 'none';
                        firstSpan.classList.remove('open');
                      }
                      e.preventDefault();
                      e.stopPropagation();
                    };
                  }
                }
              }
            }
          });
        }
      ],
      // 分页导航
      pagination: {
        previousText: '上一页',
        nextText: '下一页',
        crossChapter: true,
        crossChapterText: true,
      },
      // 代码复制配置
      copyCode: {
        buttonText: '复制',
        errorText: '错误',
        successText: '已复制'
      }
    }
  </script>
  <script src="//cdn.jsdelivr.net/npm/docsify@4"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/zoom-image.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-copy-code/dist/docsify-copy-code.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-pagination/dist/docsify-pagination.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-plugin-toc"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-bash.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-csharp.min.js"></script>
  <!-- 添加 docsify-sidebar-collapse 插件 -->
  <script src="//cdn.jsdelivr.net/npm/docsify-sidebar-collapse/dist/docsify-sidebar-collapse.min.js"></script>
</body>
</html>
